{"version":3,"file":"Html5player.js","sources":["../src/js/utils/Keyboard.js","../src/js/utils/KeyboardHandler.js","../src/js/Html5Player.js"],"sourcesContent":["class Keyboard {\n\n    // function keys\n    static get F1() { return 112;}\n    static get F2() { return 113;}\n    static get F3() { return 114;}\n    static get F4() { return 115;}\n    static get F5() { return 116;}\n    static get F6() { return 117;}\n    static get F7() { return 118;}\n    static get F8() { return 118;}\n    static get F9() { return 119;}\n    static get F10() { return 120;}\n    static get F11() { return 121;}\n    static get F12() { return 122;}\n\n    // Digits\n    static get Digit1() { return 49;}\n    static get Digit2() { return 50;}\n    static get Digit3() { return 51;}\n    static get Digit4() { return 52;}\n    static get Digit5() { return 53;}\n    static get Digit6() { return 54;}\n    static get Digit7() { return 55;}\n    static get Digit8() { return 56;}\n    static get Digit9() { return 57;}\n    static get Digit0() { return 48;}\n\n    // special chars\n    static get Minus() { return 189;}\n    static get Equal() { return 187;}\n    static get Comma() { return 188;}\n    static get Period() { return 190;}\n    static get Slash() { return 191;}\n    static get Dash() { return 189;}\n    static get Semicolon() { return 186;}\n    static get Quote() { return 222;}\n    static get BracketLeft() { return 219;}\n    static get BracketRight() { return 221;}\n    static get Backquote() { return 192;}\n    static get Accent() { return 192;}\n    static get BackSlash() { return 220;}\n\n    // control keys\n    static get Backspace() { return 8;}\n    static get Home() { return 36;}\n    static get End() { return 35;}\n    static get PageUp() { return 33;}\n    static get PageDown() { return 34;}\n    static get ArrowRight() { return 39;}\n    static get ArrowDown() { return 40;}\n    static get ArrowLeft() { return 37;}\n    static get ArrowUp() { return 38;}\n    static get Shift() { return 16;}\n    static get Control() { return 17;}\n    static get Alt() { return 18;}\n    static get Meta() { return 91;}\n    static get Space() { return 32;}\n    static get Escape() { return 27;}\n    static get CapsLock() { return 20;}\n    static get Tab() { return 9;}\n    static get Fn() { return 119;}\n    static get NumLock() { return 144;}\n    static get ScrollLock() { return 145;}\n    static get Enter() { return 66;}\n    static get NumpadEnter() { return 160;}\n    static get Backspace() { return 67;}\n    static get Clear() { return 28;}\n    static get Delete() { return 112;}\n    static get Insert() { return 124;}\n    static get Help() { return 259;}\n    static get Pause() { return 121;}\n    static get BrightnessDown() { return 220;}\n    static get BrightnessUp() { return 221;}\n    static get Eject() { return 129;}\n    static get Power() { return 26;}\n    static get PrintScreen() { return 120;}\n    static get Standby() { return 223;}\n    static get WakeUp() { return 223;}\n    static get Standby() { return 224;}\n\n    // Regular Chars\n    static get KeyQ() { return 81;}\n    static get KeyW() { return 87;}\n    static get KeyE() { return 69;}\n    static get KeyR() { return 82;}\n    static get KeyT() { return 84;}\n    static get KeyY() { return 89;}\n    static get KeyU() { return 85;}\n    static get KeyI() { return 73;}\n    static get KeyO() { return 79;}\n    static get KeyP() { return 80;}\n    static get KeyA() { return 65;}\n    static get KeyS() { return 83;}\n    static get KeyD() { return 68;}\n    static get KeyF() { return 70;}\n    static get KeyG() { return 71;}\n    static get KeyH() { return 72;}\n    static get KeyJ() { return 74;}\n    static get KeyK() { return 75;}\n    static get KeyL() { return 76;}\n    static get KeyZ() { return 90;}\n    static get KeyX() { return 88;}\n    static get KeyC() { return 67;}\n    static get KeyV() { return 86;}\n    static get KeyB() { return 66;}\n    static get KeyN() { return 78;}\n    static get KeyM() { return 77;}\n\n    // media keys\n    static get Mute() { return 173;}\n    static get VolumeDown() { return 174;}\n    static get VolumeUp() { return 175;}\n    static get NextTrack() { return 176;}\n    static get PreviousTrack() { return 177;}\n    static get Stop() { return 182;}\n    static get PlayPause() { return 179;}\n\n}\n\nexport default Keyboard;\n","class KeyboardHandler {\n\n    constructor(container, eventHandler) {\n        this.container = container;\n        this.eventHandler = eventHandler;\n\n        this.container.addEventListener('keyup', this.handleUp.bind(this));\n        this.container.addEventListener('keydown', this.handleDown.bind(this));\n    }\n\n    /**\n     * Default method onKey, uses on keyUp to actually trigger, has keyDown defaulting to preventDefault\n     */\n     onKey(key, callBack) {\n         if (!Array.isArray(key)) {\n             key = [key];\n         }\n         key.forEach( (someKey) => {\n             this.onKeyUp(someKey, callBack);\n             this.onKeyDown(someKey, (e) => {\n                 e.preventDefault();\n             });\n         });\n     }\n\n    onKeyUp(key, callBack) {\n        this.eventHandler.on('up' + key, callBack);\n    }\n\n    onKeyDown(key, callBack) {\n        this.eventHandler.on('down' + key, callBack);\n    }\n\n    handleUp(e) {\n        this.eventHandler.trigger('up' + e.keyCode, e);\n    }\n\n    handleDown(e) {\n        this.eventHandler.trigger('down' + e.keyCode, e);\n    }\n\n}\n\nexport default KeyboardHandler;\n","import Keyboard from './utils/Keyboard';\nimport KeyboardHandler from './utils/KeyboardHandler';\n\n// Check every 200 ms, lower returns false positives and higher becomes too unresponsive.\nconst CHECK_INTERVAL = 200;\n\nclass Html5Player extends Meister.PlayerPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.isLoaded = false;\n        this.seekToWhenLoaded = null;\n\n        // Monitoring progress.\n        this.bufferingMonitor = null;\n        this.CHECK_INTERVAL = this.config.checkInterval || CHECK_INTERVAL;\n        this.lastPlayPos = 0;\n        this.buffering = false;\n        this.playerPlayEvent = null;\n        this.playerPauseEvent = null;\n\n        this.on('itemLoaded', this.onItemLoaded.bind(this));\n    }\n\n    static get pluginName() {\n        return 'Html5Player';\n    }\n\n    isTypeSupported(type) {\n        if (type === 'html5') {\n            return true;\n        }\n\n        return false;\n    }\n\n    preloadContent() {\n        // It seems that the mediaElement.load() is not needed. Replaced with a hard resolve;\n        return Promise.resolve();\n    }\n\n    /**\n     * Load the global settings into the html5 video element\n     */\n    load(mediaItem) {\n        super.load(mediaItem);\n\n        this.mediaElement = document.createElement('video');\n        if (this.meister.config.audioOnly || mediaItem.mediaType === 'audio') {\n            // TODO create own plugin for audio player\n            this.backgroundImage = document.createElement('div');\n            this.defaultImageUrl = this.meister.config.defaultAudioImage || '';\n            this.backgroundImage.style['background-image'] = `url(${this.defaultImageUrl})`;\n            this.backgroundImage.setAttribute('class', 'pf-audio-image');\n\n            this.wrapper.append(this.backgroundImage);\n            this.mediaElement = document.createElement('audio');\n        }\n\n        // this.mediaElement.id = this.meister.config.playerID + Math.random();\n        this.mediaElement.width = this.config.width;\n        this.mediaElement.height = this.config.height;\n        this.mediaElement.setAttribute('class', this.meister.config.playerClass);\n\n        // for doubleclick enabled behavior on iOS the playsinline attribute must be true\n        if (this.meister.config.iosPlaysInline) {\n            this.mediaElement.setAttribute('playsinline', true);\n        }\n\n        // this.mediaElement.controls = this.meister.config.controls;\n        this.mediaElement.muted = this.meister.config.startMuted;\n\n        this.wrapper.appendChild(this.mediaElement);\n\n        this.mediaElement.addEventListener('play', () => {\n            this.meister.trigger('playerPlay', this.playerPlayEvent);\n            this.playerPlayEvent = null;\n        });\n        this.mediaElement.addEventListener('pause', () => {\n            this.meister.trigger('playerPause', this.playerPauseEvent);\n            this.playerPauseEvent = null;\n        });\n        this.mediaElement.addEventListener('playing', () => this.meister.trigger('playerPlaying'));\n        this.mediaElement.addEventListener('ended', () => this.meister.trigger('playerEnd'));\n        this.mediaElement.addEventListener('error', () => {\n            if (this.mediaElement.networkState === HTMLMediaElement.NETWORK_NO_SOURCE) {\n                this.meister.error('Media not found', Meister.ErrorCodes.NO_MEDIA_FOUND);\n            }\n\n            this.meister.trigger('playerError', { mediaError: this.mediaElement.error });\n        });\n        this.mediaElement.addEventListener('seeked', () => this.meister.trigger('_playerSeek'));\n        this.mediaElement.addEventListener('timeupdate', () => this.meister.trigger('_playerTimeUpdate'));\n        this.mediaElement.addEventListener('progress', () => this.meister.trigger('playerProgress', this.mediaElement));\n        this.mediaElement.addEventListener('loadedmetadata', () => this.meister.trigger('playerLoadedMetadata'));\n        this.mediaElement.addEventListener('durationchange', () => this.meister.trigger('playerDurationChange'));\n        this.mediaElement.addEventListener('volumechange', () => this.meister.trigger('playerVolumeChange'));\n\n        this.mediaElement.addEventListener('loadedmetadata', () => {\n            this.isLoaded = true;\n            if (this.seekToWhenLoaded) {\n                this.currentTime = this.seekToWhenLoaded;\n                this.seekToWhenLoaded = null;\n            }\n        });\n\n        // keyboard handling\n        const kb = new KeyboardHandler(this.meister.container, this.meister.eventHandler);\n        kb.onKey([Keyboard.Space, Keyboard.Pause, Keyboard.PlayPause, Keyboard.Stop], this.onSpace.bind(this));\n        kb.onKey(Keyboard.NextTrack, this.nextTrack.bind(this));\n        kb.onKey(Keyboard.PreviousTrack, this.previousTrack.bind(this));\n\n        kb.onKey(Keyboard.ArrowLeft, this.seekBack.bind(this));\n        kb.onKey(Keyboard.ArrowRight, this.seekForward.bind(this));\n        kb.onKey(Keyboard.KeyF, this.onKeyF.bind(this));\n\n        // Buffering event.\n        this.bufferingMonitor = setInterval(this.monitorBuffering.bind(this), this.CHECK_INTERVAL);\n\n        // Reset nudge counter.\n        this.on('itemUnloaded', () => { this.canNudge = 0; });\n\n        this.meister.trigger('playerCreated');\n    }\n\n    onItemLoaded(event) {\n        if (event.item.crossorigin) {\n            this.mediaElement.setAttribute('crossorigin', event.item.crossorigin);\n        } else {\n            this.mediaElement.removeAttribute('crossorigin');\n        }\n\n        if (this.meister.config.audioOnly || event.item.mediaType === 'audio') {\n            if (event.item.backgroundImage) {\n                this.backgroundImage.style['background-image'] = `url(${event.item.backgroundImage})`;\n            } else {\n                this.backgroundImage.style['background-image'] = `url(${this.defaultImageUrl})`;\n            }\n        }\n    }\n\n    monitorBuffering() {\n        const currentPlayPos = this.mediaElement.currentTime;\n\n        // Convert ms to s.\n        const offset = 1 / this.CHECK_INTERVAL;\n\n        if (!this.mediaElement.paused) {\n            // Special check for special Samsung stock browser which reports currentTime as 0 for icecast streams.\n            if (this.meister.browser.isSamsung && this.mediaElement.readyState === this.mediaElement.HAVE_ENOUGH_DATA && currentPlayPos === 0) {\n                this.meister.trigger('playerBufferedEnough');\n            } else if (!this.buffering && currentPlayPos < this.lastPlayPos + offset) {\n                this.buffering = true;\n                this.meister.trigger('playerBuffering');\n                this.meister.trigger('showLoading', {\n                    code: 'VIDEO_BUFFERING',\n                });\n            } else if (this.buffering && currentPlayPos > this.lastPlayPos + offset) {\n                this.buffering = false;\n                this.meister.trigger('playerBufferedEnough');\n            }\n        }\n\n        this.lastPlayPos = currentPlayPos;\n    }\n\n    unload() {\n        clearInterval(this.bufferingMonitor);\n        if (this.mediaElement) { this.mediaElement.remove(); }\n\n        this.meister.trigger('playerDestroyed');\n        super.unload();\n    }\n\n    set currentSrc(url) {\n        if (!this.mediaElement) { return; }\n\n        this.isLoaded = false;\n        this.mediaElement.src = url;\n    }\n\n    get currentSrc() {\n        if (!this.mediaElement) { return null; }\n\n        return this.mediaElement.src;\n    }\n\n    get volume() {\n        if (!this.mediaElement) { return null; }\n\n        return this.mediaElement.volume;\n    }\n\n    set volume(volume) {\n        if (!this.mediaElement) { return; }\n\n        this.mediaElement.volume = volume;\n    }\n\n    get muted() {\n        if (!this.mediaElement) { return null; }\n\n        return this.mediaElement.muted;\n    }\n\n    set muted(muted) {\n        if (!this.mediaElement) { return; }\n\n        this.mediaElement.muted = muted;\n    }\n\n    play(e) {\n        this.playerPlayEvent = e; // keep reference to e in class so we can pass it to playerPlay in event stack\n\n        // Player unloaded.\n        if (!this.mediaElement) { return; }\n\n        // Chrome 50 introduces promise on media.play()\n        const playPromise = this.mediaElement.play();\n\n        if (playPromise) {\n            // Known bug in chrome 50, so we catch it and try playing again.\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=593273\n            playPromise.catch((err) => {\n                // An ad pauses content, no need to play again right away.\n                if (err.message.indexOf('call to pause') === -1) {\n                    setTimeout(() => {\n                        this.play();\n                    }, 100);\n                }\n            });\n        }\n    }\n\n    pause(e) {\n        this.playerPauseEvent = e;\n\n        if (!this.mediaElement) { return; }\n\n        this.mediaElement.pause();\n    }\n\n    get duration() {\n        if (!this.mediaElement) { return null; }\n\n        return this.mediaElement.duration;\n    }\n\n    get playing() {\n        if (!this.mediaElement) { return null; }\n\n        return !this.mediaElement.paused;\n    }\n\n    get currentTime() {\n        if (!this.mediaElement) { return null; }\n\n        return this.mediaElement.currentTime;\n    }\n\n    set currentTime(time) {\n        if (!this.mediaElement) { return; }\n\n        if (this.isLoaded) {\n            this.mediaElement.currentTime = time;\n        } else {\n            this.seekToWhenLoaded = time;\n        }\n    }\n\n    onSpace(e) {\n        e.preventDefault();\n        if (this.meister.playing === true) {\n            this.meister.pause();\n        } else {\n            this.meister.play();\n        }\n    }\n\n    nextTrack(e) {\n        e.preventDefault();\n        this.meister.trigger('playlistNext');\n    }\n\n    previousTrack(e) {\n        e.preventDefault();\n        this.meister.trigger('playlistPrevious');\n    }\n\n\n    seekBack(e) {\n        e.preventDefault();\n        this.meister.trigger('requestSeek', {\n            timeOffset: -5,\n        });\n    }\n\n    seekForward(e) {\n        e.preventDefault();\n        this.meister.trigger('requestSeek', {\n            timeOffset: 5,\n        });\n    }\n\n    onKeyF(e) {\n        e.preventDefault();\n        if (this.meister.isFullscreen) {\n            this.meister.cancelFullscreen();\n        } else {\n            this.meister.requestFullscreen();\n        }\n    }\n}\n\nMeister.registerPlugin(Html5Player.pluginName, Html5Player);\n\nexport default Html5Player;\n"],"names":["Keyboard","KeyboardHandler","container","eventHandler","addEventListener","handleUp","bind","handleDown","key","callBack","Array","isArray","forEach","someKey","onKeyUp","onKeyDown","e","preventDefault","on","trigger","keyCode","CHECK_INTERVAL","Html5Player","config","meister","isLoaded","seekToWhenLoaded","bufferingMonitor","checkInterval","lastPlayPos","buffering","playerPlayEvent","playerPauseEvent","onItemLoaded","type","Promise","resolve","mediaItem","mediaElement","document","createElement","audioOnly","mediaType","backgroundImage","defaultImageUrl","defaultAudioImage","style","setAttribute","wrapper","append","width","height","playerClass","iosPlaysInline","muted","startMuted","appendChild","networkState","HTMLMediaElement","NETWORK_NO_SOURCE","error","Meister","ErrorCodes","NO_MEDIA_FOUND","mediaError","currentTime","kb","onKey","Space","Pause","PlayPause","Stop","onSpace","NextTrack","nextTrack","PreviousTrack","previousTrack","ArrowLeft","seekBack","ArrowRight","seekForward","KeyF","onKeyF","setInterval","monitorBuffering","canNudge","event","item","crossorigin","removeAttribute","currentPlayPos","offset","paused","browser","isSamsung","readyState","HAVE_ENOUGH_DATA","remove","playPromise","play","catch","err","message","indexOf","pause","playing","isFullscreen","cancelFullscreen","requestFullscreen","url","src","volume","duration","time","PlayerPlugin","registerPlugin","pluginName"],"mappings":"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"}